<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Navaraa DApp</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <script src="https://cdn.jsdelivr.net/npm/ethers@5.7.2/dist/ethers.min.js"></script>
  <script src="https://unpkg.com/feather-icons"></script>
  <style>
    :root {
      --bg-dark: #0d0d0d;
      --card-bg: rgba(20, 20, 20, 0.7);
      --accent: #8247e5;
      --text-light: #f1f1f1;
      --text-muted: #b3b3b3;
    }
    * {margin:0;padding:0;box-sizing:border-box;font-family:'Roboto',sans-serif;}
    body {background:var(--bg-dark);color:var(--text-light);min-height:100vh;display:flex;flex-direction:column;}
    header {
      display:flex;align-items:center;justify-content:center;
      padding:15px;font-size:1.4em;font-weight:700;
      background:linear-gradient(90deg,rgba(130,71,229,0.1),transparent,rgba(130,71,229,0.1));
      position:relative;
    }
    header .back-btn {
      position:absolute;left:15px;cursor:pointer;display:none;
    }
    header .wallet-btn {
      position:absolute;right:15px;font-size:0.9em;
      padding:6px 12px;border-radius:8px;cursor:pointer;
      border:1px solid var(--accent);background:var(--accent);color:white;
    }
    main {flex:1;padding:20px;display:none;animation:fadeIn 0.3s ease;}
    main.active{display:block;}
    .card {
      background:var(--card-bg);border:1px solid rgba(255,255,255,0.1);
      border-radius:12px;padding:20px;margin-bottom:20px;
      backdrop-filter:blur(8px);transition:transform 0.2s;
    }
    .card:hover {transform:translateY(-3px);border-color:var(--accent);}
    .card h2{font-size:1.2em;margin-bottom:10px;}
    .card p{color:var(--text-muted);font-size:0.95em;}
    nav {
      height:55px;display:flex;justify-content:space-around;align-items:center;
      border-top:1px solid rgba(255,255,255,0.1);background:rgba(0,0,0,0.9);
      position:fixed;bottom:0;left:0;right:0;backdrop-filter:blur(6px);
    }
    nav button {
      background:none;border:none;color:var(--text-muted);
      display:flex;flex-direction:column;align-items:center;font-size:0.75em;cursor:pointer;
    }
    nav button.active{color:var(--accent);}
    nav svg{margin-bottom:3px;}
    @keyframes fadeIn{from{opacity:0;transform:translateY(10px);}to{opacity:1;transform:translateY(0);}}
  </style>
</head>
<body>

  <header>
    <span class="back-btn" onclick="goBack()"><i data-feather="arrow-left"></i></span>
    <span id="logo" style="cursor:pointer;" onclick="openPage('home')">Navaraa</span>
    <button class="wallet-btn" id="walletBtn" onclick="connectWallet()">Connect Wallet</button>
  </header>

  <main id="home" class="active">
    <div class="card"><h2>Welcome to Navaraa</h2><p>A futuristic Web3.0 DApp built on Polygon blockchain.</p></div>
    <div class="card"><h2>Fast & Secure</h2><p>Experience blazing fast transactions with Polygon layer-2 scaling.</p></div>
  </main>

  <main id="swap">
    <div class="card"><h2>Swap Tokens</h2><p>Connect your wallet and swap tokens securely.</p></div>
  </main>

  <main id="earn">
    <div class="card"><h2>Staking</h2><p>Stake tokens & earn rewards.</p></div>
    <div class="card"><h2>Refer & Earn</h2><p>Invite friends and earn commissions.</p></div>
    <div class="card"><h2>Airdrop</h2><p>Claim free tokens during campaigns.</p></div>
    <div class="card"><h2>SIP</h2><p>Invest systematically in tokens.</p></div>
  </main>

  <nav>
    <button onclick="openPage('home')" id="nav-home" class="active"><i data-feather="home"></i><span>Home</span></button>
    <button onclick="openPage('swap')" id="nav-swap"><i data-feather="repeat"></i><span>Swap</span></button>
    <button onclick="openPage('earn')" id="nav-earn"><i data-feather="trending-up"></i><span>Earn</span></button>
  </nav>

  <script>
    let currentPage = 'home';
    let historyStack = [];
    let provider;
    let signer;
    let connectedAccount = null;

    async function connectWallet(){
      if(window.ethereum){
        try{
          provider = new ethers.providers.Web3Provider(window.ethereum);
          await provider.send("eth_requestAccounts", []);
          signer = provider.getSigner();
          connectedAccount = await signer.getAddress();
          updateWalletBtn();
        } catch(err){ console.log("Connection error:", err); }
      } else {
        alert("MetaMask not found!");
      }
    }

    function disconnectWallet(){
      connectedAccount = null;
      updateWalletBtn();
    }

    function updateWalletBtn(){
      const btn = document.getElementById("walletBtn");
      if(connectedAccount){
        btn.textContent = connectedAccount.slice(0,6)+"..."+connectedAccount.slice(-4);
        btn.onclick = disconnectWallet;
      } else {
        btn.textContent = "Connect Wallet";
        btn.onclick = connectWallet;
      }
    }

    function openPage(page){
      if(page !== currentPage){ historyStack.push(currentPage); }
      document.querySelectorAll("main").forEach(m => m.classList.remove("active"));
      document.getElementById(page).classList.add("active");

      document.querySelectorAll("nav button").forEach(b => b.classList.remove("active"));
      document.getElementById("nav-"+page)?.classList.add("active");

      currentPage = page;
      document.querySelector(".back-btn").style.display = (page === 'home') ? 'none':'block';

      // wallet button visibility
      if(page === 'earn'){ document.getElementById("walletBtn").style.display="none"; }
      else { document.getElementById("walletBtn").style.display="block"; updateWalletBtn(); }
    }

    function goBack(){
      if(historyStack.length>0){ let prev=historyStack.pop(); openPage(prev); }
      else{ openPage('home'); }
    }

    feather.replace();
  </script>

</body>
</html>
